## 基本信息

**错误编号**：`SS0301`

**错误叙述**：

* **中文**：请使用 `Take({0}).Count() >= {0}` 代替 `Count() >= {0}`。
* **英文**：Replace `Count() >= {0}` with `Take({0}).Count() >= {0}`.

**级别**：编译器警告

**类型**：性能（Performance）

**警告等级**：1

## 描述

LINQ 的 `Count()` 函数确实可以计算一个集合的长度，但这样做会导致不必要的性能损失。如果需要计算集合是否至少有几个元素的话，可以考虑使用 `Take` 方法后，再取 `Count`，这样做的目的就是为了避免后续的迭代。

如果使用 `Take` 方法提取元素数量超出总元素个数，那么整个序列都会被取到；如果比总元素数少的话，那么取 3 个元素就只会在底层产生 3 次迭代，多出来的部分也会自动终止。

那么，如果集合有 200 个元素，如果我需要判断是不是至少三个元素的话，那么 `Take(3).Count()` 怎么着都比 `Count()` 要快上不少，毕竟，只要成功取出 3 个元素了，就可以判断结果了。

```csharp
if (collection.Count() >= 5) // SS0301.
{
    ...
}
```

例如这个例子里，`collection.Count() >= 5` 将建议你改成 `collection.Take(5).Count() >= 5`。