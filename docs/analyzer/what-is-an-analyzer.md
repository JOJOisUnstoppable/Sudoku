为了考虑用户使用这些 API，我添加了一个注入式的语义分析器。这个分析器只在编译的时候生效和检测语义模型。当用户使用 API 不符合规范的时候，就会产生这些编译器错误或警告。

![](https://images.gitee.com/uploads/images/2021/0224/200331_028ad64e_1449374.png "1.png")

如图所示，比如代码写成这样的话，已经实现的语义分析器会对代码进行分析，发现 `Properties` 属性此时必须不可以为可空类型（因为会使用反射获取数据并显示到设置窗体上），因此，不符合期望的代码会产生编译错误信息：

![](https://images.gitee.com/uploads/images/2021/0224/200338_1b970318_1449374.png "2.png")

注入式语义分析器使用源代码生成器来生成编译错误和警告信息，因此它们目前是不会标注波浪线的。但你可以从错误信息里获取到具体的标记位置（比如双击错误信息，就会自动将光标跳转到错误位置上）。

所有的错误信息都创建了对应的 Wiki 页面，提供参考。该 Wiki 页面所在文件夹（“内置语义分析器”）下面就可以查找到它们。

![](https://images.gitee.com/uploads/images/2021/0224/200828_c1fca480_1449374.png "3.png")